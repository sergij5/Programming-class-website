<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Tic Tac Toe 4x4</title>
  <link href="https://fonts.googleapis.com/css2?family=Luckiest+Guy&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <a href="index.html" class="home-btn">
        <img src="assets/home.gif" alt="Home">
        </a>
    <img src="assets/Jupiter.gif" alt="Top Right Decoration" id="Jupiter" class="top-right-gif">
    <img src="assets/image 3.png" alt="Tic Tac Toe Title" class="game-title-img-2">
    <img src="assets/Pluto.gif" alt="Bottom Left Decoration" class="bottom-left-gif">
    <img src="assets/Saturn.gif" alt="Bottom Right Decoration" class="bottom-right-gif">

  <div class="game-container">
    <div class="board-4x4" id="board-4x4">
      <!-- Hardcoded 16 cells -->
      <div class="cell-4x4" data-cell></div><div class="cell-4x4" data-cell></div><div class="cell-4x4" data-cell></div><div class="cell-4x4" data-cell></div>
      <div class="cell-4x4" data-cell></div><div class="cell-4x4" data-cell></div><div class="cell-4x4" data-cell></div><div class="cell-4x4" data-cell></div>
      <div class="cell-4x4" data-cell></div><div class="cell-4x4" data-cell></div><div class="cell-4x4" data-cell></div><div class="cell-4x4" data-cell></div>
      <div class="cell-4x4" data-cell></div><div class="cell-4x4" data-cell></div><div class="cell-4x4" data-cell></div><div class="cell-4x4" data-cell></div>
    </div>

    <div class="alien-side">
      <img src="assets/alien.gif" alt="Alien" class="alien" width="150">
      <div class="speech" id="alienSpeech">Try me</div>
    </div>
  </div>
  <button id="restartButton" class="restart-btn">Restart</button>

  <script>
    const X_CLASS = 'x';
    const O_CLASS = 'o';
    const WINNING_COMBINATIONS = [
      [0,1,2,3],[4,5,6,7],[8,9,10,11],[12,13,14,15],
      [0,4,8,12],[1,5,9,13],[2,6,10,14],[3,7,11,15],
      [0,5,10,15],[3,6,9,12]
    ];

    const cellElements = document.querySelectorAll('[data-cell]');
    const restartButton = document.getElementById('restartButton');
    const alienSpeech = document.getElementById('alienSpeech');

const generalPhrases = [
  "Pathetic attempt, human.",
  "You call that a move?",
  "Did you even think?",
  "Try harder.",
  "Are you even trying?",
  "Your strategy is… nonexistent.",
  "I’ve seen better moves from a toddler.",
  "Do you even know the rules?",
  "Are you sure you want to play?",
  "This is almost too easy.",
  "You’re making this boring.",
  "Are you playing blindfolded?",
  "How stupid are you?",
  "You should just quit now.",
  "Is this your first time playing?",
  "You’re embarrassing yourself.",
  "This game is not that hard.",
  "Did you forget how to play?",
  "Are you even aware of what you’re doing?",
  "Are you just clicking randomly?",
  "Did you fall asleep while playing?",
  "You might want to reconsider your life choices.",
  "Are you slow?",
  "You're not making it to college.",
  "My pet rock plays better than you.",
  "You must be fun at parties.",
  "I’ve seen snails move faster than you.",
  "You bring shame to your species.",
  "Go back to your planet.",
  "Its not rocket science, you know.",
  "This move was almost as bad as your last one.",
  "You should be banned from playing.",
  "Looking at you makes me lose faith in humanity.",
  "Is this a joke?",
  "These moves make me want to cry.",
  "Your IQ must be below room temperature.",
  "Just get good.",
  "Most people try to win.",
  "Awww, that was cute.",
  "Let me know when you are ready.",
  "Are you sure you have a brain?",
  "It takes skill to be this bad",
  "I didn't think you'd get that far with your eyes closed.",
  "You must be really proud of that move.",
  "You should consider a different hobby.",
  "Okay it was funny the first few times...",
  "No, seriously. Do it for real this time.",
  "I hope no one's watching you play.",
];

const victoryPhrases = [
  "GG EZ.",
  "Loser.",
  "You were doomed the moment you started.",
  "Too easy.",
  "You literally had no chance.",
  "I win. As always.",
  "Stop embarrassing yourself.",
  "I’m superior in every way.",
  "Better luck next time… not that it will help.",
  "You should just give up now.",
  "Are you intenionally losing?",
  "Your parents must be disappointed.",
  "I don’t even need to try.",
  "You might be the worst player I’ve ever seen.",
  "Litterally anyone could beat you."
];

const defeatPhrases = [
  "Impossible… did you cheat?",
  "This isn’t over.",
  "You got lucky.",
];

const drawPhrases = [
  "A tie? How boring…",
  "Hmph. Not impressive.",
  "Evenly matched? Hardly.",
  "Your luck is exhausting.",
  "I didn’t even try… and still almost won.",
  "Barely escaped defeat, huh?",
  "Next time I won’t hold back.",
  "I let you off easy this time.",
  "You should be grateful for the tie.",
  "You really pushed your luck there.",
  "Nice try, but I was just toying with you.",
  "Maybe next time you’ll get lucky again.",
  "A tie is the best you can do?",
  "I was barely trying.",
  "I tried to let you win.",
  "Nice feeling huh? Don't get used to it.",
];

    let board = Array(16).fill(null);

    startGame();
    restartButton.addEventListener('click', startGame);

    function startGame() {
      board.fill(null);
      cellElements.forEach(cell => {
        cell.classList.remove(X_CLASS, O_CLASS);
        cell.style.pointerEvents = 'auto';
        cell.removeEventListener('click', handleClick);
        cell.addEventListener('click', handleClick, { once:true });
      });
      alienSpeech.textContent = "Ready to lose?";
    }

    function handleClick(e) {
      const cell = e.target;
      const index = [...cellElements].indexOf(cell);
      placeMark(cell, X_CLASS);
      board[index] = X_CLASS;

      if (checkWin(board, X_CLASS)) return endGame(defeatPhrases);
      if (isDraw(board)) return endGame(drawPhrases);

      alienTurn();
    }

    function alienTurn() {
      alienSpeech.textContent = "Thinking...";
      cellElements.forEach(c=>c.style.pointerEvents='none');

      setTimeout(()=>{
        // 1️⃣ Win if possible
        let bestMove = findWinningMove(O_CLASS);
        // 2️⃣ Block player if needed
        if(bestMove===null) bestMove = findWinningMove(X_CLASS);
        // 3️⃣ Else random
        if(bestMove===null){
          const empty = board.map((v,i)=>v===null?i:null).filter(i=>i!==null);
          bestMove = empty[Math.floor(Math.random()*empty.length)];
        }

        board[bestMove]=O_CLASS;
        placeMark(cellElements[bestMove],O_CLASS);

        if(checkWin(board,O_CLASS)) return endGame(victoryPhrases);
        if(isDraw(board)) return endGame(drawPhrases);

        alienSpeech.textContent = generalPhrases[Math.floor(Math.random()*generalPhrases.length)];
        enableBoard();
      },400);
    }

    function findWinningMove(player){
      for(let combo of WINNING_COMBINATIONS){
        const values = combo.map(i=>board[i]);
        if(values.filter(v=>v===player).length===3 && values.includes(null)){
          return combo[values.indexOf(null)];
        }
      }
      return null;
    }

    function placeMark(cell, currentClass){ cell.classList.add(currentClass); }
    function checkWin(b,player){ return WINNING_COMBINATIONS.some(c=>c.every(i=>b[i]===player)); }
    function isDraw(b){ return b.every(c=>c); }
    function endGame(phrases){
      alienSpeech.textContent = phrases[Math.floor(Math.random()*phrases.length)];
      cellElements.forEach(c=>c.style.pointerEvents='none');
    }
    function enableBoard(){ cellElements.forEach((c,i)=>{ if(!board[i]) c.style.pointerEvents='auto'; }); }
  </script>
</body>
</html>
